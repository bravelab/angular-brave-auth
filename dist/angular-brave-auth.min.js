!function(){"use strict";angular.module("app.auth",["ui.router","ngCookies","ngStorage"]).value("version","0.0.11").config(function(e){e.interceptors.push(["$sessionStorage",function(e){return{request:function(t){var n=angular.fromJson(e.loggedUser);return t.headers=t.headers||{},angular.isDefined(n.token)&&n.token&&(t.headers.Authorization="JWT "+n.token),t}}}])})}(),function(){"use strict";function e(){this.apiUrl="/api",this.resourceName="/auth/login/",this.usernameField="email",this.logo={src:"../../../styles/img/logo.png",alt:"Angular Brave Auth",title:"Angular Brave Auth"},this.templates={views:{login:"bower_components/angular-brave-auth/src/templates/login.tpl.html"},directives:{loginInfo:"bower_components/angular-brave-auth/src/templates/login-info.tpl.html"}},this.$get=function(){var e=this.apiUrl,t=this.templates,n=this.resourceName,o=this.usernameField,r=this.logo;return{getApiUrl:function(){return e},getResourceName:function(){return n},getTemplates:function(){return t},getUsernameField:function(){return o},getUsernameFieldTemplate:function(){return"bower_components/angular-brave-auth/src/templates/fields/username/"+o+".html"},getLogo:function(){return r}}},this.setApiUrl=function(e){this.apiUrl=e},this.setResourceName=function(e){this.resourceName=e},this.setTemplates=function(e){this.templates=e},this.setUsernameField=function(e){this.usernameField=e},this.setLogo=function(e){this.logo=e}}angular.module("app.auth").provider("BraveAuthConfig",e)}(),function(){"use strict";function e(e,t){e.state("login",{url:"/login",views:{root:{templateUrl:function(){return t.templates.views.login},controller:"LoginController",controllerAs:"vm"}},data:{title:"Login",htmlId:"extr-page"},resolve:{scripts:function(e){return e.register(["build/vendor.ui.js"])}}}).state("logout",{url:"/logout",views:{root:{controller:"LogoutController"}},data:{title:"Logout",htmlId:"extr-page"},resolve:{scripts:function(e){return e.register(["build/vendor.ui.js"])}}})}angular.module("app.auth").config(e),e.$inject=["$stateProvider","BraveAuthConfigProvider"]}(),function(){"use strict";function e(e,t,n,o,r){function i(){}function u(){console.log("app.auth.LoginController"),o.login(a.username,a.password)}var a=this;a.login=u,a.message=t.message,a.usernameFieldTemplate=r.getUsernameFieldTemplate(),a.logo=r.getLogo(),i()}angular.module("app.auth").controller("LoginController",e),e.$inject=["$location","$stateParams","$scope","AuthService","BraveAuthConfig"]}(),function(){"use strict";function e(e){e.logout()}angular.module("app.auth").controller("LogoutController",e),e.$inject=["AuthService"]}(),function(){"use strict";function e(e,t){return{restrict:"A",templateUrl:function(){return e.getTemplates().directives.loginInfo},link:function(e,n){e.user=t}}}angular.module("app.auth").directive("loginInfo",e),e.$inject=["BraveAuthConfig","UserModel"]}(),function(){"use strict";function e(){return function(e){"undefined"!=typeof e.username&&(this.username=e.username),"undefined"!=typeof e.roles&&(this.roles=e.roles),"undefined"!=typeof e.token&&(this.token=e.token),"undefined"!=typeof e.userdata&&(this.userdata=e.userdata),"undefined"!=typeof e.picture&&(this.picture=e.picture)}}angular.module("app.auth").factory("UserModel",e)}(),function(){"use strict";function e(e,t,n){var o="login",r="error403";return{authorize:function(){return n.identity().then(function(){var i=n.isAuthenticated();e.toState.data.roles&&e.toState.data.roles.length>0&&!n.isInAnyRole(e.toState.data.roles)&&(i?t.go(r):(e.returnToState=e.toState,e.returnToStateParams=e.toStateParams,t.go(o)))})}}}angular.module("app.auth").factory("AuthAuthorizeService",e),e.$inject=["$rootScope","$state","AuthToolsService"]}(),function(){"use strict";angular.module("app.auth").factory("AuthServiceMock",["$q",function(e){var t={};return t.token="425345934423423j4rwe239uhasd91239182721987",t}])}(),function(){"use strict";function e(t,n,o,r,i,u,a,s,l){function c(e,t){function r(e){if(console.log(e),"undefined"!=typeof e.Item&&e.Item){s.authenticate(new l(e.Item));var t=o.returnToState,r=o.returnToStateParams;t?n.go(t,r):n.go("app.home")}else i()}function i(){n.go(n.current,{message:"Invalid login or password"})}return u({method:"POST",url:a.getApiUrl()+a.getResourceName(),data:{username:e,password:t},headers:{"Content-Type":"application/json"}}).success(r).error(i)}function g(){function t(){e.unauthenticate(),n.go("app.home")}function o(){console.error("Epic failure!")}return u({method:"POST",url:a.apiUrl+"/auth/logout/"}).then(t,o)}var f={login:c,logout:g};return f}angular.module("app.auth").factory("AuthService",e),e.$inject=["$cookies","$state","$rootScope","$localStorage","$q","$http","BraveAuthConfig","AuthToolsService","UserModel"]}(),function(){"use strict";function e(e,t,n,o){var r=null,i=!1;return{isIdentityResolved:function(){return angular.isDefined(r)},isAuthenticated:function(){return i},isInRole:function(e){return i&&r.roles?-1!==r.roles.indexOf(e):!1},isInAnyRole:function(e){if(!i||!r.roles)return!1;for(var t=0;t<e.length;t++)if(this.isInRole(e[t]))return!0;return!1},authenticate:function(e){r=e,i=null!=e,e?o.loggedUser=angular.toJson(e):o.loggedUser=null},identity:function(t){var n=e.defer();return t===!0&&(r=null),r=angular.fromJson(o.loggedUser),this.authenticate(r),n.resolve(r),n.promise}}}angular.module("app.auth").factory("AuthToolsService",e),e.$inject=["$q","$http","$timeout","$sessionStorage"]}();