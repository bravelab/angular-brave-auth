!function(){"use strict";angular.module("app.auth",["ui.router","ngCookies","ngStorage"]).value("braveAuthVersion","0.0.13")}(),function(){"use strict";function e(){this.apiUrl="/api",this.resourceName="/auth/login/",this.usernameField="email",this.logo={src:"../../../styles/img/logo.png",alt:"Angular Brave Auth",title:"Angular Brave Auth"},this.templates={views:{login:"bower_components/angular-brave-auth/src/templates/login.tpl.html"},directives:{loginInfo:"bower_components/angular-brave-auth/src/templates/login-info.tpl.html"}},this.$get=function(){var e=this.apiUrl,t=this.templates,n=this.resourceName,r=this.usernameField,o=this.logo;return{getApiUrl:function(){return e},getResourceName:function(){return n},getTemplates:function(){return t},getUsernameField:function(){return r},getUsernameFieldTemplate:function(){return"bower_components/angular-brave-auth/src/templates/fields/username/"+r+".html"},getLogo:function(){return o}}},this.setApiUrl=function(e){this.apiUrl=e},this.setResourceName=function(e){this.resourceName=e},this.setTemplates=function(e){this.templates=e},this.setUsernameField=function(e){this.usernameField=e},this.setLogo=function(e){this.logo=e}}angular.module("app.auth").provider("BraveAuthConfig",e)}(),function(){"use strict";function e(e,t){e.state("login",{url:"/login",views:{root:{templateUrl:function(){return t.templates.views.login},controller:"LoginController",controllerAs:"vm"}},data:{title:"Login",htmlId:"extr-page"},resolve:{scripts:function(e){return e.register(["build/vendor.ui.js"])}}}).state("logout",{url:"/logout",views:{root:{controller:"LogoutController"}},data:{title:"Logout",htmlId:"extr-page"},resolve:{scripts:function(e){return e.register(["build/vendor.ui.js"])}}})}angular.module("app.auth").config(e),e.$inject=["$stateProvider","BraveAuthConfigProvider"]}(),function(){"use strict";function e(e,t,n,r,o){function u(){}function i(){r.login(a.username,a.password)}var a=this;a.login=i,a.message=t.message,a.usernameFieldTemplate=o.getUsernameFieldTemplate(),a.logo=o.getLogo(),u()}angular.module("app.auth").controller("LoginController",e),e.$inject=["$location","$stateParams","$scope","AuthService","BraveAuthConfig"]}(),function(){"use strict";function e(e){e.logout()}angular.module("app.auth").controller("LogoutController",e),e.$inject=["AuthService"]}(),function(){"use strict";function e(e,t){return{restrict:"A",templateUrl:function(){return e.getTemplates().directives.loginInfo},link:function(e,n){e.user=t}}}angular.module("app.auth").directive("loginInfo",e),e.$inject=["BraveAuthConfig","UserModel"]}(),function(){"use strict";angular.module("app.auth").factory("braveAuthJWTHttpInterceptor",function(e){return{request:function(t){var n=angular.fromJson(e.loggedUser);return t.headers=t.headers||{},angular.isDefined(n.token)&&n.token&&(t.headers.Authorization="JWT "+n.token),t}}})}(),function(){"use strict";function e(){return function(e){"undefined"!=typeof e.username&&(this.username=e.username),"undefined"!=typeof e.roles&&(this.roles=e.roles),"undefined"!=typeof e.token&&(this.token=e.token),"undefined"!=typeof e.userdata&&(this.userdata=e.userdata),"undefined"!=typeof e.picture&&(this.picture=e.picture)}}angular.module("app.auth").factory("UserModel",e)}(),function(){"use strict";function e(e,t,n){var r="login",o="error403";return{authorize:function(){return n.identity().then(function(){var u=n.isAuthenticated();e.toState.data.roles&&e.toState.data.roles.length>0&&!n.isInAnyRole(e.toState.data.roles)&&(u?t.go(o):(e.returnToState=e.toState,e.returnToStateParams=e.toStateParams,t.go(r)))})}}}angular.module("app.auth").factory("AuthAuthorizeService",e),e.$inject=["$rootScope","$state","AuthToolsService"]}(),function(){"use strict";angular.module("app.auth").factory("AuthServiceMock",["$q",function(e){var t={};return t.token="425345934423423j4rwe239uhasd91239182721987",t}])}(),function(){"use strict";function e(t,n,r,o,u,i,a,s,l){function c(e,t){function o(e){if("undefined"!=typeof e.Item&&e.Item){s.authenticate(new l(e.Item));var t=r.returnToState,o=r.returnToStateParams;t?n.go(t,o):n.go("app.home")}else u()}function u(){n.go(n.current,{message:"Invalid login or password"})}return i({method:"POST",url:a.getApiUrl()+a.getResourceName(),data:{username:e,password:t},headers:{"Content-Type":"application/json"}}).success(o).error(u)}function g(){function t(){e.unauthenticate(),n.go("app.home")}function r(){console.error("Epic failure!")}return i({method:"POST",url:a.apiUrl+"/auth/logout/"}).then(t,r)}var f={login:c,logout:g};return f}angular.module("app.auth").factory("AuthService",e),e.$inject=["$cookies","$state","$rootScope","$localStorage","$q","$http","BraveAuthConfig","AuthToolsService","UserModel"]}(),function(){"use strict";function e(e,t,n,r){var o=null,u=!1;return{isIdentityResolved:function(){return angular.isDefined(o)},isAuthenticated:function(){return u},isInRole:function(e){return u&&o.roles?-1!==o.roles.indexOf(e):!1},isInAnyRole:function(e){if(!u||!o.roles)return!1;for(var t=0;t<e.length;t++)if(this.isInRole(e[t]))return!0;return!1},authenticate:function(e){o=e,u=null!=e,e?r.loggedUser=angular.toJson(e):r.loggedUser=null},identity:function(t){var n=e.defer();return t===!0&&(o=null),o=angular.fromJson(r.loggedUser),this.authenticate(o),n.resolve(o),n.promise}}}angular.module("app.auth").factory("AuthToolsService",e),e.$inject=["$q","$http","$timeout","$sessionStorage"]}();