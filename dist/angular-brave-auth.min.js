!function(){"use strict";angular.module("app.auth",["ui.router","ngCookies","ngStorage"]).value("version","0.0.8")}(),function(){"use strict";angular.module("app.auth").constant("authConfig",{apiUrl:"/api",templates:{directives:{loginInfo:"bower_components/angular-brave-auth/src/templates/login-info.tpl.html"}}})}(),function(){"use strict";function t(t){t.state("login",{url:"/login",views:{root:{templateUrl:"app.auth/views/login.html",controller:"LoginController",controllerAs:"vm"}},data:{title:"Login",htmlId:"extr-page"},resolve:{srcipts:function(t){return t.register(["build/vendor.ui.js"])}}}).state("logout",{url:"/logout",views:{root:{controller:"LogoutController"}},data:{title:"Logout",htmlId:"extr-page"},resolve:{srcipts:function(t){return t.register(["build/vendor.ui.js"])}}}).state("register",{url:"/register",views:{root:{templateUrl:"app.auth/views/register.html"}},data:{title:"Register",htmlId:"extr-page"}}).state("forgotPassword",{url:"/forgot-password",views:{root:{templateUrl:"app.auth/views/forgot-password.html"}},data:{title:"Forgot Password",htmlId:"extr-page"}}).state("lock",{url:"/lock",views:{root:{templateUrl:"app.auth/views/lock.html"}},data:{title:"Locked Screen",htmlId:"lock-page"}})}angular.module("app.auth").config(t),t.$inject=["$stateProvider"]}(),function(){"use strict";function t(t,e,n){function o(){}function i(){n.login(r.username,r.password)}var r=this;r.login=i,o()}angular.module("app.auth").controller("LoginController",t),t.$inject=["$location","$scope","AuthService"]}(),function(){"use strict";function t(t){t.logout()}angular.module("app.auth").controller("LogoutController",t),t.$inject=["AuthService"]}(),function(){"use strict";angular.module("app.auth").directive("facebookSignin",function(t,e){return{replace:!0,restrict:"E",template:'<a class="btn btn-block btn-social btn-facebook"><i class="fa fa-facebook"></i> Sign in with Facebook</a>',link:function(n,o){o.on("click",function(){e.login(function(e){e.authResponse&&t.$broadcast("event:facebook-signin-success",e.authResponse)},{scope:"public_profile"})})}}})}(),function(){"use strict";angular.module("app.auth").directive("googleSignin",function(t,e){return{restrict:"E",template:'<a class="g-signin btn btn-block btn-social btn-google-plus"><i class="fa fa-google-plus"></i> Sign in with Google</a>',replace:!0,link:function(n,o){o.on("click",function(){e.login().then(function(e){t.$broadcast("event:google-plus-signin-success",e)},function(e){t.$broadcast("event:google-plus-signin-failure",e)})})}}})}(),function(){"use strict";function t(t,e){return{restrict:"A",templateUrl:function(){return t.templates.directives.loginInfo},link:function(t,n){e.initialized.then(function(){t.user=e})}}}angular.module("app.auth").directive("loginInfo",t),t.$inject=["authConfig","User"]}(),function(){"use strict";function t(t,e,n){var o=e.defer(),i={initialized:o.promise,username:"undefined",picture:"undefined"};return t.get(n.apiUrl+"/user.json").then(function(t){i.username=t.data.username,i.picture=t.data.picture,o.resolve(i)}),i}angular.module("app.auth").factory("User",t),t.$inject=["$http","$q","authConfig"]}(),function(){"use strict";angular.module("app.auth").factory("AuthServiceMock",["$q",function(t){var e={};return e.token="425345934423423j4rwe239uhasd91239182721987",e}])}(),function(){"use strict";function t(e,n,o,i,r){function a(t,e,n){return i.post("/api/accounts/",{email:t,username:n,password:e})}function u(e,n){function o(e){t.setAuthenticatedAccount(e),window.location="/"}function a(){console.error("Epic failure!")}return i({method:"POST",url:r.apiUrl+"/auth/login/",data:{username:e,password:n},headers:{"Content-Type":"application/json"}}).success(o).error(a)}function c(){return e.get("authenticatedAccount")?JSON.parse(e.get("authenticatedAccount")):void 0}function l(){return!!e.get("authenticatedAccount")}function s(t){e.put("authenticatedAccount",JSON.stringify(t))}function g(){e.remove("authenticatedAccount")}function p(){function e(){t.unauthenticate(),window.location="/#/login?logged-out"}function n(){console.error("Epic failure!")}return i({method:"POST",url:r.apiUrl+"/auth/logout/"}).then(e,n)}function f(){var t=o.defer();return n.token?t.resolve(n.token):i({method:"POST",url:r.apiUrl+"/token?api_key="+r.apiKey}).then(function(e){n.token=e.data.token,t.resolve(n.token)},function(e){delete n.token,t.reject(e)}),t.promise}var d={login:u,logout:p,register:a,unauthenticate:g,isAuthenticated:l,getAuthenticatedAccount:c,setAuthenticatedAccount:s,getToken:f};return d}angular.module("app.auth").factory("AuthService",t),t.$inject=["$cookies","$localStorage","$q","$http","APP_CONFIG"]}();