!function(){"use strict";angular.module("app.auth",["ui.router","ngCookies"]).value("version","0.0.4").constant("authKeys",{googleClientId:"",facebookAppId:""}).constant("APP_CONFIG",{apiUrl:"/api"})}(),function(){"use strict";function t(t){t.state("login",{url:"/login",views:{root:{templateUrl:"app.auth/views/login.html",controller:"LoginController",controllerAs:"vm"}},data:{title:"Login",htmlId:"extr-page"},resolve:{srcipts:function(t){return t.register(["build/vendor.ui.js"])}}}).state("logout",{url:"/logout",views:{root:{controller:"LogoutController"}},data:{title:"Logout",htmlId:"extr-page"},resolve:{srcipts:function(t){return t.register(["build/vendor.ui.js"])}}}).state("register",{url:"/register",views:{root:{templateUrl:"app.auth/views/register.html"}},data:{title:"Register",htmlId:"extr-page"}}).state("forgotPassword",{url:"/forgot-password",views:{root:{templateUrl:"app.auth/views/forgot-password.html"}},data:{title:"Forgot Password",htmlId:"extr-page"}}).state("lock",{url:"/lock",views:{root:{templateUrl:"app.auth/views/lock.html"}},data:{title:"Locked Screen",htmlId:"lock-page"}})}angular.module("app.auth").config(t),t.$inject=["$stateProvider"]}(),function(){"use strict";function t(t,e,n){function o(){}function i(){n.login(r.username,r.password)}var r=this;r.login=i,o()}angular.module("app.auth").controller("LoginController",t),t.$inject=["$location","$scope","AuthService"]}(),function(){"use strict";function t(t){t.logout()}angular.module("app.auth").controller("LogoutController",t),t.$inject=["AuthService"]}(),function(){"use strict";angular.module("app.auth").directive("facebookSignin",function(t,e){return{replace:!0,restrict:"E",template:'<a class="btn btn-block btn-social btn-facebook"><i class="fa fa-facebook"></i> Sign in with Facebook</a>',link:function(n,o){o.on("click",function(){e.login(function(e){e.authResponse&&t.$broadcast("event:facebook-signin-success",e.authResponse)},{scope:"public_profile"})})}}})}(),function(){"use strict";angular.module("app.auth").directive("googleSignin",function(t,e){return{restrict:"E",template:'<a class="g-signin btn btn-block btn-social btn-google-plus"><i class="fa fa-google-plus"></i> Sign in with Google</a>',replace:!0,link:function(n,o){o.on("click",function(){e.login().then(function(e){t.$broadcast("event:google-plus-signin-success",e)},function(e){t.$broadcast("event:google-plus-signin-failure",e)})})}}})}(),function(){"use strict";angular.module("app.auth").directive("loginInfo",function(t){return{restrict:"A",templateUrl:"app.auth/directives/login-info.tpl.html",link:function(e,n){t.initialized.then(function(){e.user=t})}}})}(),function(){"use strict";function t(){var t=function(t){this.id=t.id,this.title=t.title,this.slug=t.slug,this.content=t.content};return t}angular.module("app.auth").factory("Doc",t),t.$inject=[]}(),function(){"use strict";angular.module("app.auth").factory("AuthServiceMock",["$q",function(t){var e={};return e.token="425345934423423j4rwe239uhasd91239182721987",e}])}(),function(){"use strict";function t(e,n,o,i,r){function u(t,e,n){return i.post("/api/accounts/",{email:t,username:n,password:e})}function a(e,n){function o(e){t.setAuthenticatedAccount(e),window.location="/"}function u(){console.error("Epic failure!")}return i({method:"POST",url:r.apiUrl+"/auth/login/",data:{username:e,password:n},headers:{"Content-Type":"application/json"}}).success(o).error(u)}function c(){return e.get("authenticatedAccount")?JSON.parse(e.get("authenticatedAccount")):void 0}function l(){return!!e.get("authenticatedAccount")}function s(t){e.put("authenticatedAccount",JSON.stringify(t))}function g(){e.remove("authenticatedAccount")}function p(){function e(){t.unauthenticate(),window.location="/#/login?logged-out"}function n(){console.error("Epic failure!")}return i({method:"POST",url:r.apiUrl+"/auth/logout/"}).then(e,n)}function f(){var t=o.defer();return n.token?t.resolve(n.token):i({method:"POST",url:r.apiUrl+"/token?api_key="+r.apiKey}).then(function(e){n.token=e.data.token,t.resolve(n.token)},function(e){delete n.token,t.reject(e)}),t.promise}var d={login:a,logout:p,register:u,unauthenticate:g,isAuthenticated:l,getAuthenticatedAccount:c,setAuthenticatedAccount:s,getToken:f};return d}angular.module("app.auth").factory("AuthService",t),t.$inject=["$cookies","$localStorage","$q","$http","APP_CONFIG"]}();