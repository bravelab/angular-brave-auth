!function(){"use strict";angular.module("app.auth",["ui.router","ngCookies","ngStorage"]).value("version","0.0.10")}(),function(){"use strict";function t(){this.apiUrl="/api",this.resourceName="/auth/login/",this.templates={views:{login:"bower_components/angular-brave-auth/src/templates/login.tpl.html"},directives:{loginInfo:"bower_components/angular-brave-auth/src/templates/login-info.tpl.html"}},this.$get=function(){var t=this.apiUrl,e=this.templates,n=this.resourceName;return{getApiUrl:function(){return t},getResourceName:function(){return n},getTemplates:function(){return e}}},this.setApiUrl=function(t){this.apiUrl=t},this.setResourceName=function(t){this.resourceName=t},this.setTemplates=function(t){this.templates=t}}angular.module("app.auth").provider("BraveAuthConfig",t)}(),function(){"use strict";function t(t,e){t.state("login",{url:"/login",views:{root:{templateUrl:function(){return e.templates.views.login},controller:"LoginController",controllerAs:"vm"}},data:{title:"Login",htmlId:"extr-page"},resolve:{scripts:function(t){return t.register(["build/vendor.ui.js"])}}}).state("logout",{url:"/logout",views:{root:{controller:"LogoutController"}},data:{title:"Logout",htmlId:"extr-page"},resolve:{scripts:function(t){return t.register(["build/vendor.ui.js"])}}})}angular.module("app.auth").config(t),t.$inject=["$stateProvider","BraveAuthConfigProvider"]}(),function(){"use strict";function t(t,e,n,o){function r(){}function u(){console.log("app.auth.LoginController"),o.login(i.username,i.password)}var i=this;i.login=u,i.message=e.message,r()}angular.module("app.auth").controller("LoginController",t),t.$inject=["$location","$stateParams","$scope","AuthService"]}(),function(){"use strict";function t(t){t.logout()}angular.module("app.auth").controller("LogoutController",t),t.$inject=["AuthService"]}(),function(){"use strict";function t(t,e){return{restrict:"A",templateUrl:function(){return t.getTemplates().directives.loginInfo},link:function(t,n){t.user=e}}}angular.module("app.auth").directive("loginInfo",t),t.$inject=["BraveAuthConfig","UserModel"]}(),function(){"use strict";function t(){return function(t){"undefined"!=typeof t.username&&(this.username=t.username),"undefined"!=typeof t.roles&&(this.roles=t.roles),"undefined"!=typeof t.token&&(this.token=t.token),"undefined"!=typeof t.userdata&&(this.userdata=t.userdata),"undefined"!=typeof t.picture&&(this.picture=t.picture)}}angular.module("app.auth").factory("UserModel",t)}(),function(){"use strict";function t(t,e,n){var o="login",r="error403";return{authorize:function(){return n.identity().then(function(){var u=n.isAuthenticated();t.toState.data.roles&&t.toState.data.roles.length>0&&!n.isInAnyRole(t.toState.data.roles)&&(u?e.go(r):(t.returnToState=t.toState,t.returnToStateParams=t.toStateParams,e.go(o)))})}}}angular.module("app.auth").factory("AuthAuthorizeService",t),t.$inject=["$rootScope","$state","AuthToolsService"]}(),function(){"use strict";angular.module("app.auth").factory("AuthServiceMock",["$q",function(t){var e={};return e.token="425345934423423j4rwe239uhasd91239182721987",e}])}(),function(){"use strict";function t(e,n,o,r,u,i,a,s,l){function c(t,e){function r(t){if("undefined"!=typeof t.Item&&t.Item){s.authenticate(new l(t.Item));var e=o.returnToState,r=o.returnToStateParams;e?n.go(e,r):n.go("app.home")}else u()}function u(){n.go(n.current,{message:"Invalid login or password"})}return i({method:"POST",url:a.getApiUrl()+a.getResourceName(),data:{username:t,password:e},headers:{"Content-Type":"application/json"}}).success(r).error(u)}function f(){function e(){t.unauthenticate(),n.go("app.home")}function o(){console.error("Epic failure!")}return i({method:"POST",url:a.apiUrl+"/auth/logout/"}).then(e,o)}var g={login:c,logout:f};return g}angular.module("app.auth").factory("AuthService",t),t.$inject=["$cookies","$state","$rootScope","$localStorage","$q","$http","BraveAuthConfig","AuthToolsService","UserModel"]}(),function(){"use strict";function t(t,e,n,o){var r=null,u=!1;return{isIdentityResolved:function(){return angular.isDefined(r)},isAuthenticated:function(){return u},isInRole:function(t){return!(!u||!r.roles)&&r.roles.indexOf(t)!==-1},isInAnyRole:function(t){if(!u||!r.roles)return!1;for(var e=0;e<t.length;e++)if(this.isInRole(t[e]))return!0;return!1},authenticate:function(t){r=t,u=null!=t,t?o.loggedUser=angular.toJson(t):o.loggedUser=null},identity:function(e){var n=t.defer();return e===!0&&(r=null),r=angular.fromJson(o.loggedUser),this.authenticate(r),n.resolve(r),n.promise}}}angular.module("app.auth").factory("AuthToolsService",t),t.$inject=["$q","$http","$timeout","$sessionStorage"]}();